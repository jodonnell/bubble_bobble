<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="class.js" type="text/javascript" charset="utf-8"></script>
    <script src="constants.js" type="text/javascript" charset="utf-8"></script>
    <script src="control.js" type="text/javascript" charset="utf-8"></script>
    <script src="sprite.js" type="text/javascript" charset="utf-8"></script>
    <script src="game_init.js" type="text/javascript" charset="utf-8"></script>
    <script src="images.js" type="text/javascript" charset="utf-8"></script>
    <script src="player.js" type="text/javascript" charset="utf-8"></script>
    <script src="player_animations.js" type="text/javascript" charset="utf-8"></script>
    <script src="game_controller.js" type="text/javascript" charset="utf-8"></script>
    <script src="wall.js" type="text/javascript" charset="utf-8"></script>
    <script src="bubble.js" type="text/javascript" charset="utf-8"></script>
    <script src="blue_magoo.js" type="text/javascript" charset="utf-8"></script>
    <script src="collision_detector.js" type="text/javascript" charset="utf-8"></script>
    <script src="level_builder.js" type="text/javascript" charset="utf-8"></script>
    <script src="onscreen_sprites.js" type="text/javascript" charset="utf-8"></script>
    <script src="dead_enemy.js" type="text/javascript" charset="utf-8"></script>
    <script src="pepper.js" type="text/javascript" charset="utf-8"></script>
    <script src="text.js" type="text/javascript" charset="utf-8"></script>

    <script src="stats.js" type="text/javascript" charset="utf-8"></script>
    <title>Game</title>
  </head>
  <body>
    <script type="text/javascript">

var stats = new Stats();
stats.setMode(0); // 0: fps, 1: ms

// Align top-left
stats.domElement.style.position = 'absolute';
stats.domElement.style.right = '0px';
stats.domElement.style.top = '0px';
stats.domElement.style.float = 'right';

document.body.appendChild( stats.domElement );

var gameImages = new Images();
var gameInit = new GameInit();
var gameController = new GameController(gameInit);
var gameContext = $('#gameCanvas').get(0).getContext("2d");

window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
})();

(function animloop(){
//        var startTime = new Date().getTime();
    stats.begin();

    gameController.update();
    gameController.draw();
    requestAnimFrame(animloop);
    stats.end();


//var pow = (new Date().getTime()) - startTime
//if (pow > 1)console.log(pow);
})();


    </script>
  </body>
</html>
